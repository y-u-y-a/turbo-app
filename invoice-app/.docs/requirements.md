# 作業報告書記載アプリ要件定義書

## 1. サービス概要

エンジニアが日々の作業内容を記録し、月単位で作業報告書を作成・管理できるWebアプリケーション。

## 2. 技術スタック

- フロントエンド: Next.js
- 認証: NextAuth.js
- データベース: PostgreSQL
- PDF生成: react-pdf

## 3. 機能要件

### 3.1 認証機能
- NextAuthを使用したGoogle認証
  - Googleアカウントでのログイン/ログアウト
  - セッション管理
  - 認証状態の永続化

### 3.2 作業報告書管理
- 月別表示
  - タブによる月切り替え
  - 過去の報告書の閲覧
  - 未来の月の事前入力

- 日次作業記録
  - 勤務開始時刻（必須）
  - 勤務終了時刻（必須）
  - 休憩時間（必須、デフォルト1時間）
  - 作業内容（必須、テキストエリア）
  - 備考（任意、テキストエリア）

- 作業時間計算
  - 実労働時間の自動計算（終了時刻 - 開始時刻 - 休憩時間）
  - 月間の総労働時間の集計

### 3.3 PDF出力機能
- 月単位でのPDFダウンロード
- 会社指定フォーマットでの出力
- A4サイズ対応
- 日本語フォント対応

### 3.4 請求書管理機能
- 請求先企業管理
  - 企業情報の登録・編集
  - 企業名、請求先住所、担当者名の管理
  
- 請求書作成
  - 作業報告書からの請求書自動生成
  - 2種類の請求形態
    - 時間単価方式（単価×作業時間）
    - 人日単価方式（日額×日数）
  - 請求書番号の自動採番
  - 請求日・支払期限の設定
  - 備考欄の追加

- 請求書出力
  - PDF形式での出力
  - 会社指定フォーマットでの出力
  - 作業報告書の添付オプション

- 銀行口座情報管理
  - 複数の銀行口座情報の登録・管理
  - デフォルト口座の設定
  - 口座情報の暗号化保存
  - 請求書への口座情報の紐付け

- セキュリティ対策
  - 銀行口座情報へのアクセス制限
  - 操作ログの記録
  - 定期的なセキュリティ監査

## 4. 画面設計

### 4.1 ログイン画面
- Googleログインボタン
- アプリケーションタイトル
- 利用規約へのリンク

### 4.2 メイン画面
- ヘッダー
  - ユーザー情報表示
  - ログアウトボタン
  - PDFダウンロードボタン

- コンテンツエリア
  - 月切り替えタブ
  - 日次入力フォーム
  - 月間サマリー表示

## 5. データモデル

### Users
```
id: string (PK)
email: string
name: string
image: string
created_at: timestamp
updated_at: timestamp
```

### WorkReports
```
id: string (PK)
user_id: string (FK)
date: date
start_time: time
end_time: time
break_time: integer (minutes)
work_description: text
remarks: text
created_at: timestamp
updated_at: timestamp
```

## 6. 非機能要件

### 6.1 パフォーマンス
- ページ読み込み：2秒以内
- PDF生成：5秒以内

### 6.2 セキュリティ
- 認証済みユーザーのみアクセス可能
- ユーザーは自身の報告書のみ閲覧・編集可能

### 6.3 ブラウザ対応
- Chrome最新版
- Firefox最新版
- Safari最新版
- Edge最新版

## 7. 将来拡張性

- チーム管理機能
- 承認ワークフロー
- テンプレート機能
- カスタムフィールド追加
- 複数のPDFフォーマット対応
- Excel出力対応 